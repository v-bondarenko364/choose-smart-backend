generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

enum DecisionStatus {
  pending
  processing
  completed
  failed
}

enum DecisionCategory {
  emotional
  strategic
  impulsive
  rational
  intuitive
}

enum ComplexityScore {
  low
  medium
  high
}

model User {
  id           Int        @id @default(autoincrement())
  name         String
  email        String     @unique
  vendorUserId String?    @map("vendor_user_id")
  decisions    Decision[]
  createdAt    DateTime   @default(now()) @map("created_at")
  updatedAt    DateTime   @default(now()) @updatedAt @map("updated_at")

  @@map("users")
}

model Decision {
  id                 Int               @id @default(autoincrement())
  userId             Int               @map("user_id")
  situation          String            @db.VarChar(500)
  decision           String            @db.VarChar(250)
  reasoning          String?           @db.VarChar(250)
  status             DecisionStatus    @default(pending)
  errorMessage       String?           @map("error_message")
  decisionCategory   DecisionCategory? @map("decision_category")
  cognitiveBiases    String?           @map("cognitive_biases")
  missedAlternatives String?           @map("missed_alternatives")
  complexityScore    ComplexityScore?  @map("complexity_score")
  user               User              @relation(fields: [userId], references: [id])
  createdAt          DateTime          @default(now()) @map("created_at")
  updatedAt          DateTime          @default(now()) @updatedAt @map("updated_at")

  @@map("decisions")
}
